services:
  - type: web
    name: forge-exchange-relayer
    env: node
    buildCommand: "pnpm install && pnpm --filter relayer run build"
    startCommand: "pnpm --filter relayer run start"
    envVars:
      - key: SUPABASE_URL
        sync: false
      - key: SUPABASE_KEY
        sync: false
  - type: static
    name: forge-frontend
    buildCommand: "pnpm install && pnpm --filter frontend run build"
    staticPublishPath: "apps/frontend/dist"
    envVars:
      - key: VITE_PRIVY_APP_ID
        sync: false
    routes:
      - type: rewrite
        source: /api/*
        destination: https://forge-exchange-relayer.onrender.com/api/*
